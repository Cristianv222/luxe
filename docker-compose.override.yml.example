services:
  nginx:
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx-dev.conf:/etc/nginx/nginx.conf:ro
      - ./fast-food-service/media:/usr/share/nginx/html/media:ro
    restart: "no"

  frontend:
    environment:
      - REACT_APP_API_BASE_URL=http://localhost
      - REACT_APP_AUTH_SERVICE=http://localhost
      - REACT_APP_FAST_FOOD_SERVICE=http://localhost/api/fast-food
      - CHOKIDAR_USEPOLLING=true
    stdin_open: true
    tty: true
    restart: "no"

  auth-service:
    environment:
      - DEBUG=True
      - ALLOWED_HOSTS=localhost,127.0.0.1,0.0.0.0
      - CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost,http://127.0.0.1:3000
    volumes:
      - ./auth-service:/app
    restart: "no"

  fast-food-service:
    environment:
      - DEBUG=True
      - ALLOWED_HOSTS=localhost,127.0.0.1,0.0.0.0
      - CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost,http://127.0.0.1:3000
    volumes:
      - ./fast-food-service:/app
    restart: "no"

  postgres:
    ports:
      - "5432:5432"
    restart: "no"

  redis:
    ports:
      - "6379:6379"
    restart: "no"